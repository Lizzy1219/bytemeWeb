<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 50px;
        }

        .image-container {
            position: relative;
            display: inline-block;
            max-width: 100%;
            width: 600px;
        }

        .image-container img {
            width: 100%;
            height: auto;
            border-radius: 5px;
        }

        .text-overlay {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: white;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
            font-weight: bold;
        }

        .option-container {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .answer-button {
            width: 200px;
            height: 50px;
            border-radius: 25px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            background-color: rgba(128, 128, 128, 0.5);
            color: white;
            border: none;
            width: 60%;
        }

        .answer-button:hover {
            background-color: gray;
        }

        .retry-button {
            background-color: gray;
            color: white;
            font-size: 18px;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 20px;
        }

        .retry-button:hover {
            background-color: black;
        }

        .result-container {
            margin-top: 30px;
        }

        .result-image {
            width: 50%;
            max-width: 300px;
        }
    </style>
</head>
<body>

    <div id="question-container"></div>

    <script>
        const resultImages = {
            "蛇": "images/snake.jpg",
            "兔子": "images/rabbit.jpg",
            "烏鴉": "images/crow.jpg",
            "貓": "images/cat.jpg",
            "羊": "images/sheep.jpg",
            "獅子": "images/lion.jpg",
            "馬": "images/horse.jpg",
            "狗": "images/dog.jpg"
        };

        const questions = [
            {
                question_id: 0,
                question: " ",
                options: [" "],
                image: "https://m.media-amazon.com/images/M/MV5BMzIyNzY4NTMtNmVhYS00OWFhLTkwMWMtOGFkNTdmNWU2ZDdiXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg"
            },
            {
                question_id: 1,
                question: " ",
                options: ["覺得害怕後退幾步等他開口", "小心翼翼地詢問這裡是哪裡", "大方跟他握手並交談"],
                image: "https://m.media-amazon.com/images/M/MV5BMzIyNzY4NTMtNmVhYS00OWFhLTkwMWMtOGFkNTdmNWU2ZDdiXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg"
            },
            {
                question_id: 2,
                question: " ",
                options: ["覺得很興奮立刻喝下去開始", "告訴神秘兔子需要幾分鐘做心理準備", "先停留一陣子並準備周全才會參與"],
                image: "https://s.eslite.com/upload/product/o/2682322136001/20221230035614911889.jpg"
            },
            {
                question_id: 3,
                question: " ",
                options: ["自己一個人的實驗", "跟一個未知的搭檔組隊", "一群人的團體實驗"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 4,
                question: " ",
                options: ["覺得害怕又難受，為他的處境難過", "關心他有沒有受到傷害，需不需要幫助", "觀察四周，思考他可能在做什麼實驗"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 5,
                question: " ",
                options: ["默默觀察他，等對方主動搭話", "嘗試朝他微笑，表達善意", "向他揮手並詢問他的經歷"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 6,
                question: " ",
                options: ["立刻出發並沿路觀察四周環境", "在入口附近的路線來回查看迷宮的規律", "進入迷宮前先在四周找派得上用場的東西"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 7,
                question: " ",
                options: ["充滿神秘力量且閃閃發光的許願石", "能短暫增強夜視力的魔法藥水", "實用的武器小刀"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 8,
                question: " ",
                options: ["自己一個人默默在一旁參與", "跟原本的搭檔跟著大家", "去找很多人的小團體嘗試加入他們"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 9,
                question: " ",
                options: ["照著自己所想如實回答", "跟一旁的人討論過後再決定選哪個", "跟隨多數人的決定選擇"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 10,
                question: " ",
                options: ["暫時遠離他們，等其他人了解狀況", "跟著大家討論發生什麼事情", "觀察臉上的十字並推測倒在地板的原因"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 11,
                question: " ",
                options: ["參加這個實驗計畫是很有趣的回憶", "還好只是一個很正常的實驗沒有危及生命", "想了解這個實驗記錄了什麼和他們的目的"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            },
            {
                question_id: 12,
                question: " ",
                options: ["跟他們一一握手說分別", "分享這次實驗的心得", "問他們聯絡資訊"],
                image: "https://apl-hamivideo.cdn.hinet.net/HamiVideo/getHamiVideoImg.php?imageId=sourceImages@2143013701_o_20220224092654.jpg"
            }
        ];
        
        let currentQuestionIndex = 0;
        let answers = [];

        function loadQuestion() {
            const questionData = questions[currentQuestionIndex];
            const questionContainer = document.getElementById("question-container");

            questionContainer.innerHTML = `
                <div class="image-container">
                    <img src="${questionData.image}" alt="問題圖片" />
                    <div class="text-overlay">${questionData.question}</div>
                    <div class="option-container">
                        ${questionData.options.map((option, index) => {
                            return `
                                <button class="answer-button" onclick="answerQuestion(${questionData.question_id}, ${index + 1})">
                                    ${option}
                                </button>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function answerQuestion(questionId, choice) {
            if (questionId > 0) {
                answers.push({
                    question_id: questionId,
                    choice: choice
                });
            }

            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                submitAnswers();
            }
        }

        function submitAnswers() {
            console.log('Submitting answers:', answers);
            fetch('https://bytemeweb.000.pe/receive_data.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    user_id: Math.floor(Math.random() * 1000),
                    answers: answers
                }),
            })
            .then(response => response.json())
            .then(data => {
                showResult(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        function showResult(result) {
            const questionContainer = document.getElementById("question-container");
            const resultImageUrl = resultImages[result.result]; 

            questionContainer.innerHTML = `
                <div class="result-container">
                    <img src="${resultImageUrl}" alt="結果圖片" class="result-image" />
                    <p>${result.percentage}%</p>
                    <button class="retry-button" onclick="retryQuiz()">重測一次</button>
                </div>
            `;
        }

        function retryQuiz() {
            currentQuestionIndex = 0;
            answers = [];
            loadQuestion();
        }

        loadQuestion(); 
    </script>
</body>
</html>
